# 44. Что вы знаете про классы обертки?

### Классы-обертки (Wrapper Classes) в Java

Классы-обертки — это специальные классы в Java, которые позволяют использовать примитивные типы данных (`int`, `char`, `boolean` и т.д.) как объекты. Они "оборачивают" примитивные типы в объекты, что позволяет использовать их в контекстах, где требуются объекты (например, в коллекциях).

---

### **Список классов-оберток**

Каждый примитивный тип данных в Java имеет соответствующий класс-обертку:

| Примитивный тип | Класс-обертка   |
|-----------------|-----------------|
| `byte`          | `Byte`          |
| `short`         | `Short`         |
| `int`           | `Integer`       |
| `long`          | `Long`          |
| `float`         | `Float`         |
| `double`        | `Double`        |
| `char`          | `Character`     |
| `boolean`       | `Boolean`       |

---

### **Основные функции классов-оберток**

1. **Преобразование примитивных типов в объекты и наоборот:**
   - **Автоупаковка (Autoboxing):** Автоматическое преобразование примитивного типа в объект.
   - **Автораспаковка (Unboxing):** Автоматическое преобразование объекта в примитивный тип.

2. **Хранение примитивных типов в коллекциях:**
   - Коллекции (например, `ArrayList`, `HashMap`) могут хранить только объекты, поэтому для хранения примитивов используются классы-обертки.

3. **Методы для работы с примитивными типами:**
   - Классы-обертки предоставляют полезные методы, такие как преобразование строк в числа, сравнение чисел и т.д.

---

### **Автоупаковка и автораспаковка**

#### Автоупаковка (Autoboxing)
Автоматическое преобразование примитивного типа в объект соответствующего класса-обертки.

#### Пример:
```java
int primitive = 10;
Integer wrapper = primitive; // Автоупаковка: int -> Integer
```

#### Автораспаковка (Unboxing)
Автоматическое преобразование объекта класса-обертки в примитивный тип.

#### Пример:
```java
Integer wrapper = 20;
int primitive = wrapper; // Автораспаковка: Integer -> int
```

---

### **Пример использования классов-оберток**

```java
public class WrapperExample {
    public static void main(String[] args) {
        // Автоупаковка
        Integer a = 10; // int -> Integer
        Double b = 3.14; // double -> Double

        // Автораспаковка
        int c = a; // Integer -> int
        double d = b; // Double -> double

        // Использование в коллекциях
        List<Integer> list = new ArrayList<>();
        list.add(1); // Автоупаковка: int -> Integer
        list.add(2);

        // Методы классов-оберток
        String number = "123";
        int parsedNumber = Integer.parseInt(number); // Преобразование строки в int
        System.out.println("Parsed number: " + parsedNumber);

        // Сравнение объектов
        Integer x = 100;
        Integer y = 100;
        System.out.println("x == y: " + (x == y)); // true (кэширование для значений от -128 до 127)
    }
}
```

---

### **Методы классов-оберток**

Классы-обертки предоставляют множество полезных методов для работы с примитивными типами. Вот некоторые из них:

#### 1. **Преобразование строк в числа:**
   - `Integer.parseInt(String s)` — преобразует строку в `int`.
   - `Double.parseDouble(String s)` — преобразует строку в `double`.

#### Пример:
```java
String number = "42";
int value = Integer.parseInt(number); // value = 42
```

#### 2. **Преобразование чисел в строки:**
   - `Integer.toString(int i)` — преобразует `int` в строку.
   - `Double.toString(double d)` — преобразует `double` в строку.

#### Пример:
```java
int number = 42;
String str = Integer.toString(number); // str = "42"
```

#### 3. **Сравнение чисел:**
   - `Integer.compare(int x, int y)` — сравнивает два `int`.
   - `Double.compare(double x, double y)` — сравнивает два `double`.

#### Пример:
```java
int result = Integer.compare(10, 20); // result = -1 (10 < 20)
```

#### 4. **Константы:**
   - `Integer.MAX_VALUE` — максимальное значение для `int`.
   - `Integer.MIN_VALUE` — минимальное значение для `int`.

#### Пример:
```java
System.out.println("Max int value: " + Integer.MAX_VALUE); // 2147483647
```

---

### **Кэширование значений**

Для оптимизации Java кэширует объекты классов-оберток для небольших значений:
- Для `Integer`, `Byte`, `Short`, `Long`, `Character` кэшируются значения от **-128 до 127**.
- Для `Boolean` кэшируются только два объекта: `Boolean.TRUE` и `Boolean.FALSE`.

#### Пример:
```java
Integer a = 100;
Integer b = 100;
System.out.println(a == b); // true (кэширование)

Integer c = 200;
Integer d = 200;
System.out.println(c == d); // false (нет кэширования)
```

---

### **Преимущества классов-оберток**

1. **Использование в коллекциях:**
   - Коллекции могут хранить только объекты, поэтому классы-обертки необходимы для хранения примитивов.

2. **Методы для работы с примитивными типами:**
   - Классы-обертки предоставляют удобные методы для преобразования, сравнения и других операций.

3. **Поддержка null:**
   - Классы-обертки могут принимать значение `null`, что полезно для представления отсутствующих значений.

---

### **Недостатки классов-оберток**

1. **Дополнительная память:**
   - Объекты классов-оберток занимают больше памяти, чем примитивные типы.

2. **Производительность:**
   - Автоупаковка и автораспаковка могут снижать производительность, особенно в циклах.

---

### **Итог**

Классы-обертки — это мощный инструмент в Java, который позволяет использовать примитивные типы как объекты. Они необходимы для работы с коллекциями, предоставляют полезные методы и поддерживают автоупаковку/автораспаковку. Однако их использование может приводить к увеличению потребления памяти и снижению производительности, поэтому важно использовать их с умом.
