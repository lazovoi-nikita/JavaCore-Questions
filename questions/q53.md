# 53. Что знаете об коллекциях типа Map и их принципиальное отличие?

`Map` — это интерфейс, представляющий коллекцию, которая хранит данные в виде пар **ключ-значение**. Каждый ключ в `Map` уникален, и он используется для доступа к соответствующему значению. `Map` не является частью интерфейса `Collection`, но активно используется в Java Collections Framework (JCF).

---

### **1. Основные характеристики `Map`**

- **Уникальность ключей:** Каждый ключ в `Map` должен быть уникальным. Если попытаться добавить пару с уже существующим ключом, старое значение будет заменено новым.
- **Порядок элементов:**
  - `HashMap` — не гарантирует порядок элементов.
  - `LinkedHashMap` — сохраняет порядок вставки элементов.
  - `TreeMap` — хранит элементы в отсортированном порядке по ключам.
- **Отсутствие дубликатов ключей:** Ключи не могут повторяться, но значения могут.

---

### **2. Основные реализации `Map`**

#### a) **`HashMap`**
- Внутренне использует **хэш-таблицу** для хранения пар ключ-значение.
- **Порядок элементов:** Не гарантируется.
- **Время выполнения операций:**
  - Добавление: **O(1)** (в среднем случае).
  - Удаление: **O(1)** (в среднем случае).
  - Поиск: **O(1)** (в среднем случае).
- **Особенности:**
  - Использует метод `hashCode()` для определения места хранения ключа.
  - Если два ключа равны по `equals()`, они считаются одинаковыми.

#### Пример:
```java
Map<String, Integer> hashMap = new HashMap<>();
hashMap.put("Java", 1);
hashMap.put("Python", 2);
hashMap.put("Java", 3); // Заменяет старое значение

System.out.println(hashMap); // {Java=3, Python=2} (порядок не гарантируется)
```

#### b) **`LinkedHashMap`**
- Наследуется от `HashMap`.
- Внутренне использует **хэш-таблицу** и **двусвязный список** для сохранения порядка вставки элементов.
- **Порядок элементов:** Сохраняет порядок вставки.
- **Время выполнения операций:**
  - Добавление: **O(1)** (в среднем случае).
  - Удаление: **O(1)** (в среднем случае).
  - Поиск: **O(1)** (в среднем случае).
- **Особенности:**
  - Подходит для случаев, когда важен порядок вставки элементов.

#### Пример:
```java
Map<String, Integer> linkedHashMap = new LinkedHashMap<>();
linkedHashMap.put("Java", 1);
linkedHashMap.put("Python", 2);
linkedHashMap.put("C++", 3);

System.out.println(linkedHashMap); // {Java=1, Python=2, C++=3} (порядок сохранен)
```

#### c) **`TreeMap`**
- Внутренне использует **красно-черное дерево** (сбалансированное бинарное дерево поиска).
- **Порядок элементов:** Элементы хранятся в отсортированном порядке по ключам.
- **Время выполнения операций:**
  - Добавление: **O(log n)**.
  - Удаление: **O(log n)**.
  - Поиск: **O(log n)**.
- **Особенности:**
  - Ключи должны быть сравнимы (реализовывать интерфейс `Comparable` или передаваться `Comparator`).
  - Подходит для хранения отсортированных данных.

#### Пример:
```java
Map<String, Integer> treeMap = new TreeMap<>();
treeMap.put("Java", 1);
treeMap.put("Python", 2);
treeMap.put("C++", 3);

System.out.println(treeMap); // {C++=3, Java=1, Python=2} (отсортированный порядок)
```

---

### **3. Основные методы `Map`**

- **`put(K key, V value)`:** Добавляет пару ключ-значение. Если ключ уже существует, значение заменяется.
- **`get(Object key)`:** Возвращает значение по ключу. Если ключ отсутствует, возвращает `null`.
- **`remove(Object key)`:** Удаляет пару по ключу.
- **`containsKey(Object key)`:** Проверяет наличие ключа.
- **`containsValue(Object value)`:** Проверяет наличие значения.
- **`size()`:** Возвращает количество пар ключ-значение.
- **`keySet()`:** Возвращает набор ключей.
- **`values()`:** Возвращает коллекцию значений.
- **`entrySet()`:** Возвращает набор пар ключ-значение.

---

### **4. Примеры использования**

#### Пример 1: `HashMap`
```java
Map<String, Integer> hashMap = new HashMap<>();
hashMap.put("Java", 1);
hashMap.put("Python", 2);
hashMap.put("C++", 3);

System.out.println(hashMap.get("Java")); // 1
System.out.println(hashMap.containsKey("Python")); // true
```

#### Пример 2: `LinkedHashMap`
```java
Map<String, Integer> linkedHashMap = new LinkedHashMap<>();
linkedHashMap.put("Java", 1);
linkedHashMap.put("Python", 2);
linkedHashMap.put("C++", 3);

System.out.println(linkedHashMap); // {Java=1, Python=2, C++=3} (порядок сохранен)
```

#### Пример 3: `TreeMap`
```java
Map<String, Integer> treeMap = new TreeMap<>();
treeMap.put("Java", 1);
treeMap.put("Python", 2);
treeMap.put("C++", 3);

System.out.println(treeMap); // {C++=3, Java=1, Python=2} (отсортированный порядок)
```

---

### **5. Когда использовать `Map`?**

- **`HashMap`:** Когда порядок элементов не важен, и требуется высокая производительность.
- **`LinkedHashMap`:** Когда важен порядок вставки элементов.
- **`TreeMap`:** Когда элементы должны храниться в отсортированном порядке по ключам.

---

### **6. Сравнение реализаций `Map`**

| Характеристика          | `HashMap`                      | `LinkedHashMap`                 | `TreeMap`                       |
|-------------------------|--------------------------------|---------------------------------|---------------------------------|
| **Порядок элементов**   | Не гарантируется               | Сохраняет порядок вставки       | Отсортированный порядок         |
| **Внутренняя структура**| Хэш-таблица                    | Хэш-таблица + двусвязный список | Красно-черное дерево            |
| **Время добавления**    | O(1) (в среднем случае)        | O(1) (в среднем случае)         | O(log n)                        |
| **Время удаления**      | O(1) (в среднем случае)        | O(1) (в среднем случае)         | O(log n)                        |
| **Время поиска**        | O(1) (в среднем случае)        | O(1) (в среднем случае)         | O(log n)                        |
| **Использование**       | Уникальные ключи, порядок не важен | Уникальные ключи, порядок важен | Уникальные ключи, сортировка    |

---

### **7. Принципиальное отличие `Map` от других коллекций**

- **`Map`** хранит данные в виде пар **ключ-значение**, в то время как другие коллекции (`List`, `Set`, `Queue`) хранят только значения.
- **Ключи в `Map` уникальны**, а значения могут повторяться.
- **`Map` не является частью интерфейса `Collection`**, но активно используется в Java Collections Framework.

---

### **Итог**

- `Map` — это интерфейс для работы с коллекциями, хранящими пары ключ-значение.
- Основные реализации: `HashMap`, `LinkedHashMap`, `TreeMap`.
- `HashMap` — для быстрого доступа, порядок не важен.
- `LinkedHashMap` — для сохранения порядка вставки.
- `TreeMap` — для хранения элементов в отсортированном порядке.

Выбор реализации зависит от требований к порядку элементов и производительности.
