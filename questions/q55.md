# 55. Что общего у ArrayList\LinkedList, когда какой лучше использовать?

`ArrayList` и `LinkedList` — это две основные реализации интерфейса `List` в Java. Они имеют следующие общие характеристики:

1. **Реализуют интерфейс `List`:**
   - Обе коллекции хранят элементы в порядке их добавления.
   - Поддерживают дубликаты элементов.

2. **Динамический размер:**
   - Обе коллекции автоматически увеличивают свой размер при добавлении элементов.

3. **Методы:**
   - Поддерживают стандартные методы `List`, такие как `add()`, `remove()`, `get()`, `set()`, `size()` и другие.

4. **Итераторы:**
   - Обе коллекции поддерживают итераторы для обхода элементов.

---

### **Различия между `ArrayList` и `LinkedList`**

Несмотря на общие черты, `ArrayList` и `LinkedList` имеют принципиальные различия, которые определяют их использование в разных сценариях.

#### **1. Внутренняя структура**

- **`ArrayList`:**
  - Использует **массив** для хранения элементов.
  - Элементы хранятся в непрерывной области памяти.

- **`LinkedList`:**
  - Использует **двусвязный список** для хранения элементов.
  - Каждый элемент (узел) содержит ссылки на предыдущий и следующий элементы.

#### **2. Производительность операций**

| Операция                | `ArrayList`                  | `LinkedList`                 |
|-------------------------|------------------------------|------------------------------|
| **Доступ по индексу**   | **O(1)** (быстрый доступ)    | **O(n)** (медленный доступ)  |
| **Добавление в конец**  | **O(1)** (амортизированное время) | **O(1)** (быстрое добавление) |
| **Добавление в начало** | **O(n)** (требуется сдвиг элементов) | **O(1)** (быстрое добавление) |
| **Добавление в середину**| **O(n)** (требуется сдвиг элементов) | **O(1)** (если известен узел) |
| **Удаление из конца**   | **O(1)** (быстрое удаление)  | **O(1)** (быстрое удаление)  |
| **Удаление из начала**  | **O(n)** (требуется сдвиг элементов) | **O(1)** (быстрое удаление)  |
| **Удаление из середины**| **O(n)** (требуется сдвиг элементов) | **O(1)** (если известен узел) |
| **Поиск элемента**      | **O(n)** (линейный поиск)    | **O(n)** (линейный поиск)    |

#### **3. Память**

- **`ArrayList`:**
  - Требует меньше памяти, так как хранит только данные.
  - Использует непрерывную область памяти.

- **`LinkedList`:**
  - Требует больше памяти, так как каждый элемент (узел) хранит данные и ссылки на предыдущий и следующий элементы.
  - Использует разрозненную область памяти.

---

### **Когда использовать `ArrayList`?**

1. **Частый доступ по индексу:**
   - Если вам часто нужно получать элементы по индексу, `ArrayList` обеспечивает быстрый доступ (**O(1)**).

2. **Добавление/удаление в конце списка:**
   - `ArrayList` эффективен для добавления и удаления элементов в конце списка.

3. **Экономия памяти:**
   - `ArrayList` использует меньше памяти, чем `LinkedList`.

4. **Пример:**
   ```java
   List<String> arrayList = new ArrayList<>();
   arrayList.add("Java");
   arrayList.add("Python");
   System.out.println(arrayList.get(0)); // Быстрый доступ по индексу
   ```

---

### **Когда использовать `LinkedList`?**

1. **Частые вставки/удаления в начале или середине списка:**
   - `LinkedList` эффективен для вставки и удаления элементов в начале или середине списка (**O(1)**).

2. **Реализация стеков, очередей и деков:**
   - `LinkedList` поддерживает интерфейсы `Queue` и `Deque`, что делает его подходящим для реализации стеков, очередей и деков.

3. **Пример:**
   ```java
   List<String> linkedList = new LinkedList<>();
   linkedList.add("Java");
   linkedList.add("Python");
   linkedList.add(1, "C++"); // Быстрая вставка в середину списка
   ```

---

### **Сравнительная таблица**

| Характеристика          | `ArrayList`                  | `LinkedList`                 |
|-------------------------|------------------------------|------------------------------|
| **Внутренняя структура**| Массив                       | Двусвязный список            |
| **Доступ по индексу**   | O(1)                        | O(n)                        |
| **Добавление в конец**  | O(1) (амортизированное время)| O(1)                        |
| **Добавление в начало** | O(n)                        | O(1)                        |
| **Добавление в середину**| O(n)                       | O(1) (если известен узел)    |
| **Удаление из конца**   | O(1)                        | O(1)                        |
| **Удаление из начала**  | O(n)                        | O(1)                        |
| **Удаление из середины**| O(n)                        | O(1) (если известен узел)    |
| **Память**              | Меньше                      | Больше                      |
| **Использование**       | Частый доступ по индексу    | Частые вставки/удаления      |

---

### **Итог**

- **`ArrayList`** лучше использовать, когда:
  - Требуется частый доступ по индексу.
  - Добавление/удаление происходит в основном в конце списка.
  - Важна экономия памяти.

- **`LinkedList`** лучше использовать, когда:
  - Требуется частое добавление/удаление в начале или середине списка.
  - Нужно реализовать стек, очередь или дек.

Выбор между `ArrayList` и `LinkedList` зависит от конкретной задачи и требований к производительности.
