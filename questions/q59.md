# 59. Iterator. Как его получить(). Его методы: что и зачем?

`Iterator` — это интерфейс, который предоставляет возможность последовательно обходить элементы коллекции. Он является частью Java Collections Framework (JCF) и используется для безопасного и удобного перебора элементов.

---

### **1. Как получить `Iterator`?**

`Iterator` можно получить из любой коллекции, которая реализует интерфейс `Iterable`. Для этого используется метод `iterator()`.

#### Пример:
```java
List<String> list = new ArrayList<>();
list.add("Java");
list.add("Python");
list.add("C++");

Iterator<String> iterator = list.iterator(); // Получаем Iterator
```

---

### **2. Основные методы `Iterator`**

#### a) **`hasNext()`**
- Возвращает `true`, если в коллекции есть еще элементы для обхода.
- Используется для проверки, можно ли перейти к следующему элементу.

#### b) **`next()`**
- Возвращает следующий элемент коллекции.
- Если элементов больше нет, выбрасывает исключение `NoSuchElementException`.

#### c) **`remove()`**
- Удаляет текущий элемент из коллекции.
- Может быть вызван только после успешного вызова `next()`.
- Если вызвать `remove()` без предварительного вызова `next()`, будет выброшено исключение `IllegalStateException`.

---

### **3. Пример использования `Iterator`**

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class IteratorExample {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("Java");
        list.add("Python");
        list.add("C++");

        // Получаем Iterator
        Iterator<String> iterator = list.iterator();

        // Обход элементов
        while (iterator.hasNext()) {
            String element = iterator.next();
            System.out.println(element);

            // Удаление элемента "Python"
            if (element.equals("Python")) {
                iterator.remove();
            }
        }

        System.out.println(list); // [Java, C++]
    }
}
```

---

### **4. Зачем использовать `Iterator`?**

#### a) **Универсальность**
- `Iterator` может быть использован для обхода любых коллекций, реализующих интерфейс `Iterable` (например, `List`, `Set`, `Queue`).

#### b) **Безопасность**
- `Iterator` позволяет безопасно удалять элементы во время обхода коллекции с помощью метода `remove()`.

#### c) **Гибкость**
- `Iterator` предоставляет возможность обхода коллекции в одном направлении (вперед), что делает его простым и предсказуемым.

#### d) **Отсутствие индексов**
- В отличие от цикла `for` с индексами, `Iterator` не требует знания структуры коллекции (например, массива или списка).

---

### **5. Расширенные возможности**

#### a) **`ListIterator`**
- `ListIterator` — это расширение `Iterator`, которое позволяет обходить элементы списка (`List`) в обоих направлениях (вперед и назад).
- Дополнительные методы:
  - `hasPrevious()` — проверяет наличие предыдущего элемента.
  - `previous()` — возвращает предыдущий элемент.
  - `add(E e)` — добавляет элемент в список.
  - `set(E e)` — заменяет текущий элемент.

#### Пример:
```java
List<String> list = new ArrayList<>();
list.add("Java");
list.add("Python");
list.add("C++");

ListIterator<String> listIterator = list.listIterator();

// Обход вперед
while (listIterator.hasNext()) {
    System.out.println(listIterator.next());
}

// Обход назад
while (listIterator.hasPrevious()) {
    System.out.println(listIterator.previous());
}
```

#### b) **`forEachRemaining()` (Java 8+)**
- Метод `forEachRemaining()` позволяет выполнить действие для всех оставшихся элементов.
- Пример:
  ```java
  Iterator<String> iterator = list.iterator();
  iterator.forEachRemaining(System.out::println);
  ```

---

### **6. Сравнение с другими способами обхода коллекций**

| Способ обхода          | Преимущества                                  | Недостатки                                  |
|------------------------|----------------------------------------------|--------------------------------------------|
| **`Iterator`**         | Универсальность, безопасное удаление элементов | Только однонаправленный обход              |
| **`for` с индексами**  | Простота, доступ по индексу                  | Только для списков (`List`), небезопасное удаление |
| **Улучшенный `for`**   | Простота, читаемость                        | Невозможно удалить элемент во время обхода |
| **`forEach()`**        | Лаконичность, поддержка лямбда-выражений     | Невозможно удалить элемент во время обхода |

---

### **7. Итог**

- **`Iterator`** — это универсальный способ обхода коллекций, который предоставляет безопасное удаление элементов.
- Основные методы:
  - `hasNext()` — проверяет наличие следующего элемента.
  - `next()` — возвращает следующий элемент.
  - `remove()` — удаляет текущий элемент.
- **`ListIterator`** расширяет `Iterator`, добавляя возможность обхода в обоих направлениях и модификации списка.
- Использование `Iterator` рекомендуется, когда требуется безопасное удаление элементов или обход коллекций, не поддерживающих индексы.
