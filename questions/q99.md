# 99. Может ли один блок catch отлавливать несколько исключений (с одной и разных веток наследований порядок блоков исключений)?

Да, в Java **один блок `catch` может отлавливать несколько исключений**. Это возможно начиная с Java 7 с использованием синтаксиса **multi-catch**. Однако есть важные правила, касающиеся порядка блоков `catch`, особенно когда исключения находятся в одной и той же иерархии наследования. Давайте разберём это подробнее.

---

### 1. **Multi-catch: один блок `catch` для нескольких исключений**
Начиная с Java 7, можно перехватывать несколько исключений в одном блоке `catch`, если они не находятся в иерархии наследования (то есть одно исключение не является подклассом другого).

#### Синтаксис:
```java
try {
    // Код, который может вызвать исключения
} catch (ТипИсключения1 | ТипИсключения2 e) {
    // Обработка исключений
}
```

#### Пример:
```java
try {
    // Код, который может вызвать IOException или SQLException
    throw new IOException("Ошибка ввода-вывода");
} catch (IOException | SQLException e) {
    System.out.println("Произошла ошибка: " + e.getMessage());
}
```

---

### 2. **Порядок блоков `catch`**
Если исключения находятся в одной иерархии наследования (одно исключение является подклассом другого), то **более конкретное исключение должно быть указано раньше**, чем более общее. В противном случае компилятор выдаст ошибку.

#### Пример правильного порядка:
```java
try {
    // Код, который может вызвать FileNotFoundException или IOException
    throw new FileNotFoundException("Файл не найден");
} catch (FileNotFoundException e) {
    System.out.println("Файл не найден: " + e.getMessage());
} catch (IOException e) {
    System.out.println("Ошибка ввода-вывода: " + e.getMessage());
}
```

#### Пример неправильного порядка:
```java
try {
    throw new FileNotFoundException("Файл не найден");
} catch (IOException e) {
    System.out.println("Ошибка ввода-вывода: " + e.getMessage());
} catch (FileNotFoundException e) { // Ошибка компиляции: FileNotFoundException уже перехвачено
    System.out.println("Файл не найден: " + e.getMessage());
}
```

---

### 3. **Multi-catch и иерархия исключений**
Если вы попытаетесь использовать multi-catch для исключений, которые находятся в одной иерархии наследования, компилятор выдаст ошибку.

#### Пример:
```java
try {
    throw new FileNotFoundException("Файл не найден");
} catch (IOException | FileNotFoundException e) { // Ошибка компиляции: FileNotFoundException уже перехвачено
    System.out.println("Ошибка: " + e.getMessage());
}
```

---

### 4. **Почему порядок важен?**
Порядок блоков `catch` важен, потому что:
- Если более общее исключение указано раньше, оно перехватит все исключения, включая его подклассы.
- Это делает блоки `catch` для подклассов недостижимыми, что приводит к ошибке компиляции.

---

### 5. **Пример с multi-catch и разными ветками наследования**
Если исключения находятся в разных ветках иерархии, их можно перехватывать в одном блоке `catch`.

#### Пример:
```java
try {
    // Код, который может вызвать IOException или NullPointerException
    throw new IOException("Ошибка ввода-вывода");
} catch (IOException | NullPointerException e) {
    System.out.println("Произошла ошибка: " + e.getMessage());
}
```

---

### 6. **Использование общего предка**
Если исключения имеют общего предка (например, `Exception`), можно перехватывать их все в одном блоке `catch`, но это не рекомендуется, так как теряется информация о типе исключения.

#### Пример (не рекомендуется):
```java
try {
    throw new IOException("Ошибка ввода-вывода");
} catch (Exception e) {
    System.out.println("Произошла ошибка: " + e.getMessage());
}
```

---

### Итог:
- **Multi-catch** позволяет перехватывать несколько исключений в одном блоке `catch`, если они не находятся в одной иерархии наследования.
- **Порядок блоков `catch`** важен: более конкретные исключения должны быть указаны раньше, чем более общие.
- Если исключения находятся в одной иерархии, их нельзя перехватывать в одном блоке `catch` с помощью multi-catch.
- Использование общего предка (например, `Exception`) для перехвата всех исключений возможно, но не рекомендуется из-за потери информации о типе исключения.

Эти правила помогают писать более безопасный и понятный код для обработки исключений.
